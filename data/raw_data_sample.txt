Id,Body,Title,Tags
"4","<p>I want to use a <code>Track-Bar</code> to change a <code>Form</code>'s opacity.</p>
<p>This is my code:</p>
<pre class=""lang-cs prettyprint-override""><code>decimal trans = trackBar1.Value / 5000;
this.Opacity = trans;
</code></pre>
<p>When I build the application, it gives the following error:</p>
<blockquote>
<pre class=""lang-none prettyprint-override""><code>Cannot implicitly convert type decimal to double
</code></pre>
</blockquote>
<p>I have tried using <code>trans</code> and <code>double</code>, but then the <code>Control</code> doesn't work. This code worked fine in a past VB.NET project.</p>
","How to convert a Decimal to a Double in C#?","<c#><floating-point><type-conversion><double><decimal>"
"6","<p>I have an absolutely positioned <code>div</code> containing several children, one of which is a relatively positioned <code>div</code>. When I use a <code>percentage-based width</code> on the child <code>div</code>, it collapses to <code>0 width</code> on IE7, but not on Firefox or Safari.</p>
<p>If I use <code>pixel width</code>, it works. If the parent is relatively positioned, the percentage width on the child works.</p>
<ol>
<li>Is there something I'm missing here?</li>
<li>Is there an easy fix for this besides the <code>pixel-based width</code> on the child?</li>
<li>Is there an area of the CSS specification that covers this?</li>
</ol>
","Why did the width collapse in the percentage width child element in an absolutely positioned parent on Internet Explorer 7?","<html><css><internet-explorer-7>"
"7","<p>An explicit cast to <code>double</code> like this isn't necessary:</p>

<pre><code>double trans = (double) trackBar1.Value / 5000.0;
</code></pre>

<p>Identifying the constant as <code>5000.0</code> (or as <code>5000d</code>) is sufficient:</p>

<pre><code>double trans = trackBar1.Value / 5000.0;
double trans = trackBar1.Value / 5000d;
</code></pre>
","",""
"9","<p>Given a <code>DateTime</code> representing a person's birthday, how do I calculate their age in years?</p>
","How do I calculate someone's age based on a DateTime type birthday?","<c#><.net><datetime>"
"11","<p>Given a specific <code>DateTime</code> value, how do I display relative time, like:</p>

<ul>
<li>2 hours ago</li>
<li>3 days ago</li>
<li>a month ago</li>
</ul>
","Calculate relative time in C#","<c#><datetime><time><datediff><relative-time-span>"
"12","<p>Here's how I do it</p>

<pre class=""lang-csharp prettyprint-override""><code>var ts = new TimeSpan(DateTime.UtcNow.Ticks - dt.Ticks);
double delta = Math.Abs(ts.TotalSeconds);

if (delta &lt; 60)
{
  return ts.Seconds == 1 ? ""one second ago"" : ts.Seconds + "" seconds ago"";
}
if (delta &lt; 60 * 2)
{
  return ""a minute ago"";
}
if (delta &lt; 45 * 60)
{
  return ts.Minutes + "" minutes ago"";
}
if (delta &lt; 90 * 60)
{
  return ""an hour ago"";
}
if (delta &lt; 24 * 60 * 60)
{
  return ts.Hours + "" hours ago"";
}
if (delta &lt; 48 * 60 * 60)
{
  return ""yesterday"";
}
if (delta &lt; 30 * 24 * 60 * 60)
{
  return ts.Days + "" days ago"";
}
if (delta &lt; 12 * 30 * 24 * 60 * 60)
{
  int months = Convert.ToInt32(Math.Floor((double)ts.Days / 30));
  return months &lt;= 1 ? ""one month ago"" : months + "" months ago"";
}
int years = Convert.ToInt32(Math.Floor((double)ts.Days / 365));
return years &lt;= 1 ? ""one year ago"" : years + "" years ago"";
</code></pre>

<p>Suggestions? Comments? Ways to improve this algorithm?</p>
","",""
"13","<p>Is there a standard way for a web server to be able to determine a user's timezone within a web page? </p>

<p>Perhaps from an HTTP header or part of the <code>user-agent</code> string?</p>
","Determine a user's timezone","<html><browser><timezone><user-agent><timezone-offset>"
"14","<p>What is the difference between <a href=""http://msdn.microsoft.com/en-us/library/9a6a2sxy.aspx"" rel=""noreferrer""><code>Math.Floor()</code></a> and <a href=""http://msdn.microsoft.com/en-us/library/system.math.truncate.aspx"" rel=""noreferrer""><code>Math.Truncate()</code></a> in .NET?</p>
","Difference between Math.Floor() and Math.Truncate()","<.net><math>"
"16","<p>How do you expose a LINQ query as an ASMX web service?
<br>
Usually, from the business tier, I can return a typed <code>DataSet</code> or a <code>DataTable</code> which can be serialized for transport over ASMX.</p>
<p>How can I do the same for a LINQ query? <br>
Is there a way to populate a typed <code>DataSet</code> or a <code>DataTable</code> via a LINQ query?</p>
<pre><code>public static MyDataTable CallMySproc()
{
    string conn = &quot;...&quot;;

    MyDatabaseDataContext db = new MyDatabaseDataContext(conn);
    MyDataTable dt = new MyDataTable();

    // execute a sproc via LINQ
    var query = from dr
                in db.MySproc().AsEnumerable
                select dr;

    // copy LINQ query resultset into a DataTable -this does not work !    
    dt = query.CopyToDataTable();
   
    return dt;
}
</code></pre>
<p>How could I put the result set of a LINQ query into a <code>DataSet</code> or a <code>DataTable</code>?
<br>
Alternatively, can the LINQ query be serializable so that I can expose it as an ASMX web service?</p>
","Filling a DataSet or a DataTable from a LINQ query result set","<c#><linq><web-services><.net-3.5>"
"17","<p>How do I store binary data in <a href=""http://en.wikipedia.org/wiki/MySQL"" rel=""noreferrer"">MySQL</a>?</p>
","Binary Data in MySQL","<mysql><database><binary-data><data-storage>"
"18","<p>For a table like this:</p>

<pre><code>CREATE TABLE binary_data (
    id INT(4) NOT NULL AUTO_INCREMENT PRIMARY KEY,
    description CHAR(50),
    bin_data LONGBLOB,
    filename CHAR(50),
    filesize CHAR(50),
    filetype CHAR(50)
);
</code></pre>

<p>Here is a PHP example:</p>

<pre><code>&lt;?php
    // store.php3 - by Florian Dittmer &lt;dittmer@gmx.net&gt;
    // Example php script to demonstrate the storing of binary files into
    // an sql database. More information can be found at http://www.phpbuilder.com/
?&gt;

&lt;html&gt;
    &lt;head&gt;&lt;title&gt;Store binary data into SQL Database&lt;/title&gt;&lt;/head&gt;

    &lt;body&gt;
        &lt;?php
            // Code that will be executed if the form has been submitted:

            if ($submit) {
                // Connect to the database (you may have to adjust
                // the hostname, username or password).

                mysql_connect(""localhost"", ""root"", ""password"");
                mysql_select_db(""binary_data"");

                $data = mysql_real_escape_string(fread(fopen($form_data, ""r""), filesize($form_data)));

                $result = mysql_query(""INSERT INTO binary_data (description, bin_data, filename, filesize, filetype) "".
                                    ""VALUES ('$form_description', '$data', '$form_data_name', '$form_data_size', '$form_data_type')"");

                $id= mysql_insert_id();
                print ""&lt;p&gt;This file has the following Database ID: &lt;b&gt;$id&lt;/b&gt;"";

                mysql_close();
            } else {

                // else show the form to submit new data:
        ?&gt;
        &lt;form method=""post"" action=""&lt;?php echo $PHP_SELF; ?&gt;"" enctype=""multipart/form-data""&gt;
            File Description:&lt;br&gt;
            &lt;input type=""text"" name=""form_description""  size=""40""&gt;
            &lt;input type=""hidden"" name=""MAX_FILE_SIZE"" value=""1000000""&gt;
            &lt;br&gt;File to upload/store in database:&lt;br&gt;
            &lt;input type=""file"" name=""form_data""  size=""40""&gt;
            &lt;p&gt;&lt;input type=""submit"" name=""submit"" value=""submit""&gt;
        &lt;/form&gt;

        &lt;?php
            }
        ?&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre>
","",""
"19","<p>I'm looking for the fastest way to obtain the value of π, as a personal challenge. More specifically, I'm using ways that don't involve using <code>#define</code> constants like <code>M_PI</code>, or hard-coding the number in.</p>

<p>The program below tests the various ways I know of. The inline assembly version is, in theory, the fastest option, though clearly not portable. I've included it as a baseline to compare against the other versions. In my tests, with built-ins, the <code>4 * atan(1)</code> version is fastest on GCC 4.2, because it auto-folds the <code>atan(1)</code> into a constant. With <code>-fno-builtin</code> specified, the <code>atan2(0, -1)</code> version is fastest.</p>

<p>Here's the main testing program (<code>pitimes.c</code>):</p>

<pre class=""lang-c prettyprint-override""><code>#include &lt;math.h&gt;
#include &lt;stdio.h&gt;
#include &lt;time.h&gt;

#define ITERS 10000000
#define TESTWITH(x) {                                                       \
    diff = 0.0;                                                             \
    time1 = clock();                                                        \
    for (i = 0; i &lt; ITERS; ++i)                                             \
        diff += (x) - M_PI;                                                 \
    time2 = clock();                                                        \
    printf(""%s\t=&gt; %e, time =&gt; %f\n"", #x, diff, diffclock(time2, time1));   \
}

static inline double
diffclock(clock_t time1, clock_t time0)
{
    return (double) (time1 - time0) / CLOCKS_PER_SEC;
}

int
main()
{
    int i;
    clock_t time1, time2;
    double diff;

    /* Warmup. The atan2 case catches GCC's atan folding (which would
     * optimise the ``4 * atan(1) - M_PI'' to a no-op), if -fno-builtin
     * is not used. */
    TESTWITH(4 * atan(1))
    TESTWITH(4 * atan2(1, 1))

#if defined(__GNUC__) &amp;&amp; (defined(__i386__) || defined(__amd64__))
    extern double fldpi();
    TESTWITH(fldpi())
#endif

    /* Actual tests start here. */
    TESTWITH(atan2(0, -1))
    TESTWITH(acos(-1))
    TESTWITH(2 * asin(1))
    TESTWITH(4 * atan2(1, 1))
    TESTWITH(4 * atan(1))

    return 0;
}
</code></pre>

<p>And the inline assembly stuff (<code>fldpi.c</code>) that will only work for x86 and x64 systems:</p>

<pre class=""lang-c prettyprint-override""><code>double
fldpi()
{
    double pi;
    asm(""fldpi"" : ""=t"" (pi));
    return pi;
}
</code></pre>

<p>And a build script that builds all the configurations I'm testing (<code>build.sh</code>):</p>

<pre><code>#!/bin/sh
gcc -O3 -Wall -c           -m32 -o fldpi-32.o fldpi.c
gcc -O3 -Wall -c           -m64 -o fldpi-64.o fldpi.c

gcc -O3 -Wall -ffast-math  -m32 -o pitimes1-32 pitimes.c fldpi-32.o
gcc -O3 -Wall              -m32 -o pitimes2-32 pitimes.c fldpi-32.o -lm
gcc -O3 -Wall -fno-builtin -m32 -o pitimes3-32 pitimes.c fldpi-32.o -lm
gcc -O3 -Wall -ffast-math  -m64 -o pitimes1-64 pitimes.c fldpi-64.o -lm
gcc -O3 -Wall              -m64 -o pitimes2-64 pitimes.c fldpi-64.o -lm
gcc -O3 -Wall -fno-builtin -m64 -o pitimes3-64 pitimes.c fldpi-64.o -lm
</code></pre>

<p>Apart from testing between various compiler flags (I've compared 32-bit against 64-bit too because the optimizations are different), I've also tried switching the order of the tests around. But still, the <code>atan2(0, -1)</code> version still comes out on top every time.</p>
","What is the fastest way to get the value of π?","<performance><algorithm><language-agnostic><unix><pi>"
"22","<p>The best way that I know of because of leap years and everything is:</p>

<pre class=""lang-cs prettyprint-override""><code>DateTime birthDate = new DateTime(2000,3,1);
int age = (int)Math.Floor((DateTime.Now - birthDate).TotalDays / 365.25D);
</code></pre>
","",""
"24","<p>If I have a trigger before the update on a table, how can I throw an error that prevents the update on that table?</p>
","Throw an error preventing a table update in a MySQL trigger","<mysql><database><triggers>"
"25","<p>I'm having issues getting the C sockets API to work properly in C++ on z/OS.</p>
<p>Although I am including <code>sys/socket.h</code>, I still get compile time errors telling me that <code>AF_INET</code> is not defined.</p>
<p>Am I missing something obvious, or is this related to the fact that being on z/OS makes my problems much more complicated?</p>
<p>I discovered that there is an <code>#ifdef</code> that I'm hitting. Apparently z/OS isn't happy unless I define which &quot;type&quot; of sockets I'm using with:</p>
<pre><code>#define _OE_SOCKETS
</code></pre>
<p>Now, I personally have no idea what this <code>_OE_SOCKETS</code> is actually for, so if any z/OS sockets programmers are out there (all 3 of you), perhaps you could give me a rundown of how this all works?</p>
<p>Test App</p>
<pre><code>#include &lt;sys/socket.h&gt;

int main()
{
    return AF_INET;
}
</code></pre>
<p>Compile/Link Output:</p>
<pre><code>cxx -Wc,xplink -Wl,xplink -o inet_test inet.C

&quot;./inet.C&quot;, line 5.16: CCN5274 (S) The name lookup for &quot;AF_INET&quot; did not find a declaration.
CCN0797(I) Compilation failed for file ./inet.C. Object file not created.
</code></pre>
<p>A check of sys/sockets.h does include the definition I need, and as far as I can tell, it is not being blocked by any <code>#ifdef</code> statements.</p>
<p>I have however noticed it contains the following:</p>
<pre><code>#ifdef __cplusplus
  extern &quot;C&quot; {
#endif
</code></pre>
<p>which encapsulates basically the whole file? Not sure if it matters.</p>
","How to use the C socket API in C++ on z/OS","<c++><c><sockets><mainframe><zos>"
"26","<p>The answer by phpguy is correct but I think there is a lot of confusion in the  additional details there.</p>

<p>The basic answer is in a <code>BLOB</code> data type / attribute domain. <strong>BLOB</strong> is short for Binary Large Object and that column data type is specific for handling binary data.</p>

<p>See <a href=""http://dev.mysql.com/doc/refman/5.7/en/blob.html"" rel=""noreferrer"">the relevant manual page for MySQL</a>.</p>
","",""
"27","<p>@jeff</p>
<p>IMHO yours seems a little long. However it does seem a little more robust with support for &quot;yesterday&quot; and &quot;years&quot;.  But in my experience when this is used, the person is most likely to view the content in the first 30 days. It is only the really hardcore people that come after that. So, I usually elect to keep this short and simple.</p>
<p>This is the method I am currently using in one of my websites. This returns only a relative day, hour and time.  And then the user has to slap on &quot;ago&quot; in the output.</p>
<pre><code>public static string ToLongString(this TimeSpan time)
{
    string output = String.Empty;

    if (time.Days &gt; 0)
        output += time.Days + &quot; days &quot;;

    if ((time.Days == 0 || time.Days == 1) &amp;&amp; time.Hours &gt; 0)
        output += time.Hours + &quot; hr &quot;;

    if (time.Days == 0 &amp;&amp; time.Minutes &gt; 0)
        output += time.Minutes + &quot; min &quot;;

    if (output.Length == 0)
        output += time.Seconds + &quot; sec&quot;;

    return output.Trim();
}
</code></pre>
","",""
"29","<p>There are no HTTP headers that will report the clients timezone so far although it has been suggested to include it in the HTTP specification.</p>

<p>If it was me, I would probably try to fetch the timezone using clientside JavaScript and then submit it to the server using Ajax or something.</p>
","",""
"30","<p>I've had no trouble using the BSD sockets API in C++, in GNU/Linux. Here's the sample program I used:</p>

<pre><code>#include &lt;sys/socket.h&gt;

int
main()
{
    return AF_INET;
}
</code></pre>

<p>So my take on this is that z/OS is probably the complicating factor here, however, because I've never used z/OS before, much less programmed in it, I can't say this definitively. :-P</p>
","",""
"31","<p>The parent <code>div</code> needs to have a defined <code>width</code>, either in pixels or as a percentage. In Internet&nbsp;Explorer&nbsp;7, the parent <code>div</code> needs a defined <code>width</code> for child percentage <code>div</code>s to work correctly.</p>
","",""
"33","<p><code>Math.Floor</code> rounds down, <code>Math.Ceiling</code> rounds up, and <code>Math.Truncate</code> rounds towards zero. Thus, <code>Math.Truncate</code> is like <code>Math.Floor</code> for positive numbers, and like <code>Math.Ceiling</code> for negative numbers. Here's the <a href=""https://msdn.microsoft.com/en-us/library/system.math.truncate.aspx"" rel=""noreferrer"">reference</a>.</p>
<p>For completeness, <code>Math.Round</code> rounds to the nearest integer. If the number is exactly midway between two integers, then it rounds towards the even one. <a href=""https://msdn.microsoft.com/en-us/library/system.math.round.aspx"" rel=""noreferrer"">Reference.</a></p>
<p>See also: <a href=""https://stackoverflow.com/questions/14/whats-the-difference-between-math-floor-and-math-truncate-in-c/580252#580252"">Pax Diablo's answer</a>. Highly recommended!</p>
","",""
"34","<p>How do I forcefully unload a <code>ByteArray</code> from memory using ActionScript 3?</p>

<p>I have tried the following:</p>

<pre><code>// First non-working solution
byteArray.length = 0;
byteArray = new ByteArray();

// Second non-working solution
for ( var i:int=0; i &lt; byteArray.length; i++ ) {
    byteArray[i] = null;
}
</code></pre>
","How to unload a ByteArray using Actionscript 3?","<arrays><actionscript-3><apache-flex>"
"36","<p>How can I monitor an SQL Server database for changes to a table without using triggers or modifying the structure of the database in any way? My preferred programming environment is <a href=""http://en.wikipedia.org/wiki/.NET_Framework"" rel=""noreferrer"">.NET</a> and C#.</p>

<p>I'd like to be able to support any <a href=""http://en.wikipedia.org/wiki/Microsoft_SQL_Server#Genesis"" rel=""noreferrer"">SQL Server 2000</a> SP4 or newer. My application is a bolt-on data visualization for another company's product. Our customer base is in the thousands, so I don't want to have to put in requirements that we modify the third-party vendor's table at every installation.</p>

<p>By <em>""changes to a table""</em> I mean changes to table data, not changes to table structure.</p>

<p>Ultimately, I would like the change to trigger an event in my application, instead of having to check for changes at an interval.</p>

<hr>

<p>The best course of action given my requirements (no triggers or schema modification, SQL Server 2000 and 2005) seems to be to use the <code>BINARY_CHECKSUM</code> function in <a href=""http://en.wikipedia.org/wiki/Transact-SQL"" rel=""noreferrer"">T-SQL</a>. The way I plan to implement is this:</p>

<p>Every X seconds run the following query:</p>

<pre><code>SELECT CHECKSUM_AGG(BINARY_CHECKSUM(*))
FROM sample_table
WITH (NOLOCK);
</code></pre>

<p>And compare that against the stored value. If the value has changed, go through the table row by row using the query:</p>

<pre><code>SELECT row_id, BINARY_CHECKSUM(*)
FROM sample_table
WITH (NOLOCK);
</code></pre>

<p>And compare the returned checksums against stored values.</p>
","Check for changes to an SQL Server table?","<sql><sql-server><datatable><rdbms>"
"39","<p>I am aware that in <a href=""http://en.wikipedia.org/wiki/.NET_Framework"" rel=""noreferrer"">.NET</a> there are three timer types (see <em><a href=""http://msdn.microsoft.com/en-us/magazine/cc164015.aspx"" rel=""noreferrer"">Comparing the Timer Classes in the .NET Framework Class Library</a></em>). I have chosen a threaded timer as the other types can drift if the main thread is busy, and I need this to be reliable.</p>

<p>The way this timer works in the control of the timer is put on another thread so it can always tick along with the work begin completed on the parent thread when it is not busy.</p>

<p>The issue with this timer in a console application is that while the timer is ticking along on another thread the main thread is not doing anything to the application closes.</p>

<p>I tried adding a <code>while true</code> loop, but then the main thread is too busy when the timer does go off.</p>
","Reliable timer in a console application","<c#><.net><vb.net><timer>"
"42","<p>I am starting a new web application in PHP and this time around I want to create something that people can extend by using a plugin interface. </p>

<p>How does one go about writing 'hooks' into their code so that plugins can attach to specific events?</p>
","Best way to allow plugins for a PHP application","<php><plugins><architecture><hook>"
"44","<p>Consider using a <a href=""https://docs.microsoft.com/en-us/dotnet/api/system.threading.manualresetevent"" rel=""nofollow noreferrer"">ManualResetEvent</a> to block the main thread at the end of its processing, and call <code>Reset()</code> on it once the timer's processing has finished.  If this is something that needs to run continuously, consider moving this into a service process instead of a console app.</p>
","",""
"45","<p>You can use something like <code>Console.ReadLine()</code> to block the main thread, so other background threads (like timer threads) will still work. You may also use an <a href=""https://docs.microsoft.com/en-us/dotnet/api/system.threading.autoresetevent"" rel=""noreferrer"">AutoResetEvent</a> to block the execution, then (when you need to) you can call Set() method on that AutoResetEvent object to release the main thread. Also ensure that your reference to Timer object doesn't go out of scope and garbage collected.</p>
","",""
"48","<p>Let's say you create a wizard in an HTML form. One button goes back, and one goes forward. Since the <em>back</em> button appears first in the markup when you press <kbd>Enter</kbd>, it will use that button to submit the form.</p>

<p>Example:</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-html lang-html prettyprint-override""><code>&lt;form&gt;
  &lt;!-- Put your cursor in this field and press Enter --&gt;
  &lt;input type=""text"" name=""field1"" /&gt;

  &lt;!-- This is the button that will submit --&gt;
  &lt;input type=""submit"" name=""prev"" value=""Previous Page"" /&gt;

  &lt;!-- But this is the button that I WANT to submit --&gt;
  &lt;input type=""submit"" name=""next"" value=""Next Page"" /&gt;
&lt;/form&gt;</code></pre>
</div>
</div>
</p>

<p>I would like to get to decide which button is used to submit the form when a user presses <kbd>Enter</kbd>. That way, when you press <kbd>Enter</kbd> the wizard will move to the next page, not the previous. Do you have to use <code>tabindex</code> to do this?</p>
","Multiple submit buttons in an HTML form","<html><forms><form-submit><submit-button>"
"49","<p><a href=""https://web.archive.org/web/20180330233216/http://www.brokenbuild.com/blog/2006/08/15/mysql-triggers-how-do-you-abort-an-insert-update-or-delete-with-a-trigger/"" rel=""noreferrer"">Here is one hack</a> that may work. It isn't clean, but it looks like it might work:</p>

<p>Essentially, you just try to update a column that doesn't exist.</p>
","",""